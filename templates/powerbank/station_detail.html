{% extends "includes/base.html" %}

{% block content %}
<div class="container station-container">
    <h2 class="station-title">üìç {{ station.name }} Power Banks</h2>

    <p class="station-location">Location: <strong>{{ station.location }}</strong></p>

    {% if power_banks %}
        <div class="power-bank-list">
            {% for power_bank in power_banks %}
                <div class="power-bank-card">
                    <!-- ID + ÁîµÊ±†ÂõæÊ†á -->
                    <div class="power-bank-info">
                        <span class="power-bank-icon">üîã</span>
                        <strong>ID: {{ power_bank.id }}</strong>
                    </div>

                    <!-- ËøõÂ∫¶Êù°ÂÆπÂô® -->
                    <div class="progress-container">
                        <div class="power-bank-progress">
                            <div class="progress-bar {% if power_bank.battery_level > 50 %} bg-success
                                {% elif power_bank.battery_level > 20 %} bg-warning
                                {% else %} bg-danger {% endif %}"
                                style="width: {{ power_bank.battery_level }}%;">
                            </div>
                        </div>
                    </div>

                    <!-- ÁîµÈáèÁôæÂàÜÊØî -->
                    <span class="battery-level {% if power_bank.battery_level > 50 %} text-success
                        {% elif power_bank.battery_level > 20 %} text-warning
                        {% else %} text-danger {% endif %}">
                        {{ power_bank.battery_level }}%
                    </span>

                    <!-- ÊåâÈíÆ -->
                    <div class="power-bank-action">
                        {% if request.user.is_authenticated %}
                            {% if power_bank.battery_level > 20 %}
                                <a href="{% url 'create_order' power_bank_id=power_bank.id %}" class="btn action-btn rent-btn">Rent</a>
                        {% else %}
                                <button class="btn action-btn low-battery-btn" onclick="alertLowBattery()">Low</button>
                            {% endif %}
                        {% else %}
                            <button class="btn action-btn rent-btn" onclick="alertNotLoggedIn()">Rent</button>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
         <h2 class="station-title text-center">No available power banks at this station. Please try another one.</h2>
    {% endif %}

    <div class="text-center mt-4">
        <a href="{% url 'station_list' %}" class="btn station-back-btn">Stations</a>

    </div>

</div>
{% endblock %}
