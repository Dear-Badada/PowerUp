{% extends 'includes/base.html' %}
{% load static %}

{% block title %}Rent a Power Bank{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-center"><i class="fa-solid fa-download"></i> Rent Power Bank</h2>

    <!-- 用户当前余额 -->
    <div class="wallet-balance-box">
        <p><strong>Your Balance:</strong> £{{ balance|floatformat:2 }}</p>
    </div>

    <!-- 选择租借站点 -->
    <div class="mb-3 mx-auto" style="width: 75%;">
        <label for="rental_station" class="form-label">
            <i class="fas fa-map-marker-alt"></i> Select Rental Station:
        </label>
        <select id="rental_station" name="rental_station" class="form-select w-100">
            {% for station in stations %}
                <option value="{{ station.id }}">{{ station.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="text-center">
        <form method="POST" action="{% url 'rent_powerbank' powerbank_id=power_bank.id%}" id="rentForm">
            {% csrf_token %}
            <input type="hidden" name="station_id" id="selected_station">
            <button type="submit" class="btn btn-success">Rent</button>
        </form>

        <!-- 如果余额不足，提供充值按钮 -->
        {% if balance < 5 %}
        <p class="mt-3 text-danger"><i class="fas fa-exclamation-triangle"></i> Your balance is low! Please recharge.</p>
        {% endif %}

        <a href="{% url 'recharge_wallet' %}?next={% url 'rent_powerbank' %}" class="btn btn-warning">
            Recharge Wallet
        </a>

    </div>
</div>

<script src="{% static 'js/rent.js' %}"></script>
{% endblock %}
